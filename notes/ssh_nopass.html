<!DOCTYPE html>

<html>

<head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=utf-8" />
    <title>SSH Without a Password</title>
    <link href="../shared/site.css" type="text/css"
        rel="stylesheet" />
</head>

<body>

    <h2 class="c1">SSH without a Password</h2>

    The following steps can be used to ssh from one system to
    another without specifying a password.

    <h3>Notes:</h3>

    <ul>
        <li>The system from which the ssh session is started via the
        ssh command is the <i>client</i>.
        </li>

        <li>The system that the ssh session connects to is the
        <i>server</i>.
        </li>

        <li>These steps seem to work on systems running <a href=
        "http://www.openssh.org">OpenSSH</a>.
        </li>

        <li>The steps assume that a RSA key is being used because
        OpenSSH has deprecated DSA keys as being "too [] weak and
        [] recommend[s] against [their] use" (see <a href=
        "https://www.openssh.com/legacy.html"
        >OpenSSH Legacy Options</a>). To use a DSA key (for example,
        on an older system) substitute 'dsa' for 'rsa'.
        </li>

        <li>The steps assume that you are using a Bourne-like shell
        (sh, <a href="http://www.kornshell.com/">ksh</a> or <a href=
        "http://www.gnu.org/software/bash/bash.html">bash</a>)
        </li>

        <li>Some of this information came from:<br />
          <a href="http://www.der-keiler.de/Mailing-Lists/securityfocus/Secure_Shell/2002-12/0083.html"
          >http://www.der-keiler.de/Mailing-Lists/securityfocus/Secure_Shell/2002-12/0083.html</a>
        </li>
    </ul>
  
    <hr />

    <h3>Steps:</h3>

    <ol>
        <li>
        <p>On the <i>client</i> run the following commands:
        <pre>$ mkdir -p ~/.ssh
$ chmod 0700 ~/.ssh
$ ssh-keygen -t rsa -f ~/.ssh/id_rsa -P ''</pre>

        This should result in two files, <code>~/.ssh/id_rsa</code> 
        (private key) and <code>~/.ssh/id_rsa.pub</code> (public key).
        </p>
        </li>

        <li>
            <p>Copy <code>~/.ssh/id_rsa.pub</code> to the 
            <i>server</i>.
            </p>
        </li>

        <li>
            <p>On the <i>server</i> run the following commands:
            <pre>$ mkdir -p ~/.ssh
$ chmod 0700 ~/.ssh
$ cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys2
$ chmod 0600 ~/.ssh/authorized_keys2</pre>

            Depending on the version of OpenSSH the following commands
            may also be required:
            <pre>$ cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
$ chmod 0600 ~/.ssh/authorized_keys</pre>

            An alternative is to create a link from authorized_keys2 to
            authorized_keys:
            <pre>$ cd ~/.ssh &amp;&amp; ln -s authorized_keys2 authorized_keys</pre>
            </p>
        </li>

        <li>
            <p>On the <i>client</i> test the results by ssh'ing to
            the <i>server</i>:
            <pre>$ ssh -i ~/.ssh/id_rsa <i>server</i></pre>
            If a password prompt appears, adding the <code>-v</code> 
            option before <code>-i</code> may be helpful to determine
            the problem.
            </p>
       </li>

        <li>
            <p>(Optional) Add the following ~/.ssh/config on the
            <i>client</i>:
            <pre>Host <i>server</i>
     IdentityFile ~/.ssh/id_rsa</pre>

            This allows access to the <i>server</i> without having
            to specify the <code>id_rsa</code> file as an argument 
            to <code>ssh</code> each time.
            </p>
        </li>
    </ol>

    <h3>Helpful manpages:</h3>

    <ul>
        <li><a href=
        "http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">
        ssh(1)</a></li>

        <li><a href=
        "http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">
        ssh-keygen(1)</a></li>

        <li><a href=
        "http://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config&amp;apropos=0&amp;sektion=0&amp;manpath=OpenBSD+Current&amp;arch=i386&amp;format=html">
        ssh_config(5)</a></li>
    </ul>

    <h3>Translations:</h3>
    <ul>
        <li>Indonesian translation by Jordan Silaen /
         <a href="http://ChameleonJohn.com">ChameleonJohn.com</a>:
         <a href=
            "http://www.chameleonjohn.com/translations/ssh_nopass-Indonesian"
         >http://www.chameleonjohn.com/translations/ssh_nopass-Indonesian</a>
        </li>
    </ul>

    <hr />

    <span class="c2">
    <a href="../index.html">Home</a>&nbsp;/&nbsp;<a href="index.html">Notes</a>
    </span>

</body>
</html>
